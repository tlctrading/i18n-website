<script setup>
import { useI18n } from 'vue-i18n'
import { useLocalePath } from '#i18n'
import { useRouter } from 'vue-router'

const router = useRouter()
const { locale, setLocale, t } = useI18n({ useScope: 'global' })
const localePath = useLocalePath()

const currentLang = ref(locale.value);

const languages = [
  { code: 'ar', label: 'ðŸ‡¸ðŸ‡¦ Ø¹Ø±Ø¨ÙŠ' },
  { code: 'bg', label: 'ðŸ‡§ðŸ‡¬ Ð‘ÑŠÐ»Ð³Ð°Ñ€ÑÐºÐ¸' },
  { code: 'bn', label: 'ðŸ‡§ðŸ‡© à¦¬à¦¾à¦‚à¦²à¦¾' },
  { code: 'cz', label: 'ðŸ‡¨ðŸ‡¿ ÄŒeÅ¡tina' },
  { code: 'da', label: 'ðŸ‡©ðŸ‡° Dansk' },
  { code: 'de', label: 'ðŸ‡©ðŸ‡ª Deutsch' },
  { code: 'el', label: 'ðŸ‡¬ðŸ‡· Î•Î»Î»Î·Î½Î¹ÎºÎ¬' },
  { code: 'en', label: 'ðŸ‡¬ðŸ‡§ English' },
  { code: 'es', label: 'ðŸ‡ªðŸ‡¸ EspaÃ±ol' },
  { code: 'et', label: 'ðŸ‡ªðŸ‡ª Eesti' },
  { code: 'fi', label: 'ðŸ‡«ðŸ‡® Suomi' },
  { code: 'fr', label: 'ðŸ‡«ðŸ‡· FranÃ§ais' },
  { code: 'ga', label: 'ðŸ‡®ðŸ‡ª Ghaeilge' },
  { code: 'hi', label: 'ðŸ‡®ðŸ‡³ à¤¹à¤¿à¤‚à¤¦à¥€' },
  { code: 'hr', label: 'ðŸ‡­ðŸ‡· Hrvatski' },
  { code: 'hu', label: 'ðŸ‡­ðŸ‡º Magyar' },
  { code: 'ko', label: 'ðŸ‡°ðŸ‡· í•œêµ­ì–´' },
  { code: 'id', label: 'ðŸ‡®ðŸ‡© Indonesia' },
  { code: 'is', label: 'ðŸ‡®ðŸ‡¸ Ãslenska' },
  { code: 'it', label: 'ðŸ‡®ðŸ‡¹ Italiano' },
  { code: 'ja', label: 'ðŸ‡¯ðŸ‡µ æ—¥æœ¬èªž' },
  { code: 'lt', label: 'ðŸ‡±ðŸ‡¹ LietuviÅ³' },
  { code: 'lv', label: 'ðŸ‡±ðŸ‡» LatvieÅ¡u' },
  { code: 'mt', label: 'ðŸ‡²ðŸ‡¹ Malti' },
  { code: 'ms', label: 'ðŸ‡²ðŸ‡¾ Bahasa Melayu' },
  { code: 'tl', label: 'ðŸ‡µðŸ‡­ Tagalog' },
  { code: 'nl', label: 'ðŸ‡³ðŸ‡± Nederlands' },
  { code: 'pl', label: 'ðŸ‡µðŸ‡± Polski' },
  { code: 'pt', label: 'ðŸ‡µðŸ‡¹ PortuguÃªs' },
  { code: 'ro', label: 'ðŸ‡·ðŸ‡´ RomÃ¢nÄƒ' },
  { code: 'ru', label: 'ðŸ‡·ðŸ‡º Ð ÑƒÑÑÐºÐ¸Ð¹' },
  { code: 'sk', label: 'ðŸ‡¸ðŸ‡° SlovenÄina' },
  { code: 'sl', label: 'ðŸ‡¸ðŸ‡® SlovenÄina' },
  { code: 'sq', label: 'ðŸ‡¦ðŸ‡± hqipja' },
  { code: 'sr', label: 'ðŸ‡·ðŸ‡¸ Ð¡Ñ€Ð¿ÑÐºÐ¸' },
  { code: 'sv', label: 'ðŸ‡¸ðŸ‡ª Svenska' },
  { code: 'th', label: 'ðŸ‡¹ðŸ‡­ à¹à¸šà¸šà¹„à¸—à¸¢' },
  { code: 'tr', label: 'ðŸ‡¹ðŸ‡· TÃ¼rkÃ§e' },
  { code: 'uk', label: 'ðŸ‡ºðŸ‡¦ Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°' },
  { code: 'vi', label: 'ðŸ‡»ðŸ‡³ Viá»‡t Nam' },
  { code: 'zh', label: 'ðŸ‡­ðŸ‡° ä¸­å›½äºº' }
]

const changeLang = async (code) => {
  await setLocale(code)
  router.replace({ path: router.currentRoute.value.fullPath })
}
</script>

<template>
  <header class="site-header" role="banner">
    <nav class="uk-container uk-navbar flex items-center" role="navigation">

      <div class="uk-navbar-left">
        <ul class="uk-navbar-nav">
          <li>
            <NuxtLink class="logo" :to="localePath('index')">Aivontrixen</NuxtLink>
          </li>
        </ul>
      </div>

      <div class="uk-navbar-right uk-visible@s">
        <ul class="uk-navbar-nav uk-light">
          <li><NuxtLink class="uk-text-large" :to="localePath('index')">{{ t('home') }}</NuxtLink></li>
          <li><NuxtLink class="uk-text-large" :to="localePath('about')">{{ t('about') }}</NuxtLink></li>
          <li><NuxtLink class="uk-text-large" :to="localePath('contacts')">{{ t('contacts') }}</NuxtLink></li>
        </ul>

        <div class="lang-switcher lang-switcher--desktop">
          <select class="lang-select" v-model="currentLang" @change="changeLang(currentLang)">
            <option v-for="lang in languages" :key="lang.code" :value="lang.code">{{ lang.label }}</option>
          </select>
        </div>
      </div>

      <div class="uk-navbar-right uk-hidden@s">
        <div class="uk-inline">
          <button class="mob-button uk-navbar-toggle-icon" popovertarget="mobile-menu">
            <span uk-icon="menu"></span>
          </button>

          <div id="mobile-menu" popover class="uk-width-large">
            <ul class="mob-menu">
              <li><NuxtLink :to="localePath('index')">{{ t('home') }}</NuxtLink></li>
              <li><NuxtLink :to="localePath('about')">{{ t('about') }}</NuxtLink></li>
              <li><NuxtLink :to="localePath('contacts')">{{ t('contacts') }}</NuxtLink></li>
            </ul>

            <div class="lang-switcher lang-switcher--mobile">
              <select class="lang-select" v-model="currentLang" @change="changeLang(currentLang)">
                <option v-for="lang in languages" :key="lang.code" :value="lang.code">{{ lang.label }}</option>
              </select>
            </div>
          </div>
        </div>
      </div>

    </nav>
  </header>
</template>
